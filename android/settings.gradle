pluginManagement {
    repositories {
        gradlePluginPortal()
        google()
        mavenCentral()
    }
}
dependencyResolutionManagement {
    repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)
    repositories {
        google()
        mavenCentral()
    }
}
rootProject.name = "android"
include(":app")

def flutterProjectRoot = rootDir.parentFile.toPath()

def plugins = new Properties()
def pluginsFile = new File(flutterProjectRoot.toFile(), ".flutter-plugins")
if (pluginsFile.exists()) {
    pluginsFile.withReader("UTF-8") { reader -> plugins.load(reader) }
}

// Ensure Flutter SDK is available
def properties = new Properties()
def localProp = new File(rootDir, "local.properties")
if (localProp.exists()) {
    localProp.withReader("UTF-8") { reader -> properties.load(reader) }
}
def flutterSdkPath = properties.getProperty("flutter.sdk")
if (flutterSdkPath == null) {
    println "⚠️  flutter.sdk غير مُعرّف في android/local.properties — سيحاول Android Studio ضبطه تلقائيًا."
}
